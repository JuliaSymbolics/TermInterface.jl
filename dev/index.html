<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>TermInterface.jl Documentation · TermInterface.jl</title><meta name="title" content="TermInterface.jl Documentation · TermInterface.jl"/><meta property="og:title" content="TermInterface.jl Documentation · TermInterface.jl"/><meta property="twitter:title" content="TermInterface.jl Documentation · TermInterface.jl"/><meta name="description" content="Documentation for TermInterface.jl."/><meta property="og:description" content="Documentation for TermInterface.jl."/><meta property="twitter:description" content="Documentation for TermInterface.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>TermInterface.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>TermInterface.jl Documentation</a><ul class="internal"><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li><li><a class="tocitem" href="#API-Docs"><span>API Docs</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>TermInterface.jl Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>TermInterface.jl Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSymbolics/TermInterface.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="TermInterface.jl-Documentation"><a class="docs-heading-anchor" href="#TermInterface.jl-Documentation">TermInterface.jl Documentation</a><a id="TermInterface.jl-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#TermInterface.jl-Documentation" title="Permalink"></a></h1><p>This package contains definitions for common functions that are useful for symbolic expression manipulation. Its purpose is to provide a shared interface between various symbolic programming Julia packages, for example  <a href="https://github.com/JuliaSymbolics/SymbolicUtils.jl">SymbolicUtils.jl</a>, <a href="https://github.com/JuliaSymbolics/Symbolics.jl">Symbolics.jl</a> and <a href="https://github.com/0x0f0f0f/Metatheory.jl">Metatheory.jl</a>.</p><p>You should define the following methods for your expression tree type to work with TermInterface.jl, and therefore with <a href="https://github.com/JuliaSymbolics/SymbolicUtils.jl">SymbolicUtils.jl</a>  and <a href="https://github.com/0x0f0f0f/Metatheory.jl">Metatheory.jl</a>.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><h3 id="Function-call-Julia-Expressions"><a class="docs-heading-anchor" href="#Function-call-Julia-Expressions">Function call Julia Expressions</a><a id="Function-call-Julia-Expressions-1"></a><a class="docs-heading-anchor-permalink" href="#Function-call-Julia-Expressions" title="Permalink"></a></h3><pre><code class="language-julia hljs">ex = :(f(a, b))
@test head(ex) == :call
@test children(ex) == [:f, :a, :b]
@test operation(ex) == :f
@test arguments(ex) == [:a, :b]
@test isexpr(ex)
@test iscall(ex)
@test ex == maketerm(Expr, :call, [:f, :a, :b], nothing)</code></pre><h3 id="Non-function-call-Julia-Expressions"><a class="docs-heading-anchor" href="#Non-function-call-Julia-Expressions">Non-function call Julia Expressions</a><a id="Non-function-call-Julia-Expressions-1"></a><a class="docs-heading-anchor-permalink" href="#Non-function-call-Julia-Expressions" title="Permalink"></a></h3><pre><code class="language-julia hljs">ex = :(arr[i, j])
@test head(ex) == :ref
@test_throws ErrorException operation(ex)
@test_throws ErrorException arguments(ex)
@test isexpr(ex)
@test !iscall(ex)
@test ex == maketerm(Expr, :ref, [:arr, :i, :j], nothing)</code></pre><h2 id="API-Docs"><a class="docs-heading-anchor" href="#API-Docs">API Docs</a><a id="API-Docs-1"></a><a class="docs-heading-anchor-permalink" href="#API-Docs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.arguments" href="#TermInterface.arguments"><code>TermInterface.arguments</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">arguments(x)</code></pre><p>Returns the arguments to the function call in a function call expression. <code>iscall(x)</code> must be true as a precondition.</p><p>Depending on the type and internal representation of <code>x</code>, <code>arguments(x)</code> may return an unsorted collection nondeterministically, This is to make sure to retrieve the arguments of an expression when the order of arguments does not matter  but the speed of the operation does. To ensure to retrieve arguments in a sorted manner, you can use  and implement the function <code>sorted_arguments</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L90-L102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.arity-Tuple{Any}" href="#TermInterface.arity-Tuple{Any}"><code>TermInterface.arity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">arity(x)</code></pre><p>When <code>x</code> satisfies <code>iscall</code>, returns the number of arguments of <code>x</code>. Implicitly defined if <code>arguments(x)</code> is defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L121-L126">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.children" href="#TermInterface.children"><code>TermInterface.children</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">children(x)</code></pre><p>Returns the children (aka tail) of the S-expression.</p><p>Depending on the type and internal representation of <code>x</code>, <code>children(x)</code> may return an unsorted collection nondeterministically, This is to make sure to retrieve the children of an AST node when the order of children does not matter, but the speed of the operation does. To ensure to retrieve children in a sorted manner, you can use  and implement the function <code>sorted_children</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L51-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.head" href="#TermInterface.head"><code>TermInterface.head</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">head(x)</code></pre><p>Returns the head of the S-expression.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L44-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.is_operation-Tuple{Any}" href="#TermInterface.is_operation-Tuple{Any}"><code>TermInterface.is_operation</code></a> — <span class="docstring-category">Method</span></header><section><div><p>is_operation(f)</p><p>Returns a single argument anonymous function predicate, that returns <code>true</code> if and only if the argument to the predicate satisfies <code>iscall</code> and <code>operation(x) == f</code> </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/utils.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.iscall-Tuple{Any}" href="#TermInterface.iscall-Tuple{Any}"><code>TermInterface.iscall</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">iscall(x)</code></pre><p>Returns <code>true</code> if <code>x</code> is a function call expression. If true, <code>operation(x)</code>, <code>arguments(x)</code> must also be defined for <code>x</code>.</p><p>If <code>iscall(x)</code> is true, then also <code>isexpr(x)</code> <em>must</em> be true. The other way around is not true. (A function call is always an expression node, but not every expression tree represents a function call).</p><p>This means that, <code>head(x)</code> and <code>children(x)</code> must be defined. Together with <code>operation(x)</code> and <code>arguments(x)</code>. </p><p><strong>Examples</strong></p><p>In a functional language, all expression trees are function calls (e.g. SymbolicUtils.jl). Let&#39;s say that you have an hybrid array and functional language. <code>iscall</code> on the expression <code>v[i]</code> is <code>false</code>, and <code>iscall</code> on expression <code>f(x)</code> is <code>true</code>, but both of them are nested expressions, and <code>isexpr</code> is <code>true</code> on both.</p><p>The same goes for Julia <code>Expr</code>. An <code>Expr(:block, ...)</code> is <em>not a function call</em> and has no <code>operation</code> and <code>arguments</code>, but has a <code>head</code> and <code>children</code>.</p><p>The distinction between <code>head</code>/<code>children</code> and <code>operation</code>/<code>arguments</code> is needed  when dealing with languages that are <em>not representing function call operations as their head</em>. The main example is  <code>Expr(:call, :f, :x)</code>: it has both a <code>head</code> and an <code>operation</code>, which are respectively <code>:call</code> and <code>:f</code>.</p><p>In other symbolic expression languages, such as SymbolicUtils.jl, the <code>head</code> of a node  can correspond to <code>operation</code> and <code>children</code> can correspond to <code>arguments</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L11-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.isexpr-Tuple{Any}" href="#TermInterface.isexpr-Tuple{Any}"><code>TermInterface.isexpr</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isexpr(x)</code></pre><p>Returns <code>true</code> if <code>x</code> is an expression tree. If true, <code>head(x)</code> and <code>children(x)</code> methods must be defined for <code>x</code>. Optionally, if <code>x</code> represents a function call, <code>iscall(x)</code> should be true, and <code>operation(x)</code> and <code>arguments(x)</code> should also be defined. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.maketerm" href="#TermInterface.maketerm"><code>TermInterface.maketerm</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">maketerm(T, head, children, metadata)</code></pre><p>Constructs an expression. <code>T</code> is a constructor type, <code>head</code> and <code>children</code> are the head and tail of the S-expression. <code>metadata</code> is any metadata attached to this expression.</p><p>Note that <code>maketerm</code> may not necessarily return an object of type <code>T</code>. For example, it may return a representation which is more efficient.</p><p>This function is used by term-manipulation routines to construct terms generically. In these routines, <code>T</code> is usually the type of the input expression which is being manipulated. For example, when a subexpression is substituted, the outer expression is re-constructed with the sub-expression. <code>T</code> will be the type of the outer expression.</p><p>Packages providing expression types <em>must</em> implement this method for each expression type.</p><p>Giving <code>nothing</code> for <code>metadata</code> should result in a default being selected.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L148-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.metadata" href="#TermInterface.metadata"><code>TermInterface.metadata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">metadata(expr, md)</code></pre><p>Returns a <code>expr</code> with metadata <code>md</code> attached to it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.metadata-Tuple{Any}" href="#TermInterface.metadata-Tuple{Any}"><code>TermInterface.metadata</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">metadata(x)</code></pre><p>Returns the metadata attached to <code>x</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L131-L135">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.node_count-Tuple{Any}" href="#TermInterface.node_count-Tuple{Any}"><code>TermInterface.node_count</code></a> — <span class="docstring-category">Method</span></header><section><div><p>node_count(t) Count the nodes in a symbolic expression tree satisfying <code>isexpr</code> and <code>arguments</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/utils.jl#L11-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.operation" href="#TermInterface.operation"><code>TermInterface.operation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">operation(x)</code></pre><p>Returns the function a function call expression is calling. <code>iscall(x)</code> must be true as a precondition.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L81-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.sorted_arguments-Tuple{Any}" href="#TermInterface.sorted_arguments-Tuple{Any}"><code>TermInterface.sorted_arguments</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sorted_arguments(x::T)</code></pre><p>Returns the arguments to the function call in a function call expression, in a <strong>sorted fashion</strong>. <code>iscall(x)</code> must be true as a precondition. Analogous to <code>arguments</code>,  but ensures that the operation is deterministic and always returns  the arguments in the order they are stored.</p><p>By default, this redirects to <code>arguments</code>, therefore implementing  it is optional.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L106-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TermInterface.sorted_children-Tuple{Any}" href="#TermInterface.sorted_children-Tuple{Any}"><code>TermInterface.sorted_children</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sorted_children(x::T)</code></pre><p>Returns the children of an AST node, in a <strong>sorted fashion</strong>. <code>isexpr(x)</code> must be true as a precondition. Analogous to <code>children</code>,  but ensures that the operation is deterministic and always returns  the children in the order they are stored.</p><p>By default, this redirects to <code>children</code>, therefore implementing  it is optional.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaSymbolics/TermInterface.jl/blob/568ef13506444936a10b63289f8c141e0d3224f9/src/TermInterface.jl#L66-L76">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Sunday 23 June 2024 14:54">Sunday 23 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
